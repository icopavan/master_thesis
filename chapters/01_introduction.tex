\section{Introduction}
% Erläuterung und Begründung der Themenstellung (Argumentationsphase - Einleitung)
% In dieser Phase der Arbeit soll dargestellt werden, aus welchen Gründen das Thema der Arbeit bzw. die Forschungsfrage relevant ist bzw. wieso das Thema behandelt werden soll. Die Motivation zum Thema steht also im Vordergrund, wobei aber nicht persönliche Vorlieben, sondern die fachliche Wertigkeit der Fragestellung im Forschungs- und Innovationskontext gemeint ist.

The number of interactive applications has risen rapidly since the computational power of personal computers started increasing. New technologies emerge, like motion sensors and controller to interact with a software. With this development, the number of interactive applications built around sound detection and classification is growing as well. Examples for successful applications are apps that match recorded music with the respective song title and artist, or karaoke games that recognize how well the singer strikes the notes and texts. Furthermore, the broadband of the Internet and thus the performance of web-services are still making substantial progress. Ever since, new web technologies are developing that enable the web to become more and more interactive. This also leads to plenty of e-learning websites, which are readily accepted by a large audience. In particular, language learning platforms and platforms to playfully support kids in learning the alphabet or solving maths problems became quite famous in the past few years. This master's thesis makes use of the modern web technologies in order to add a high rate of interaction to the web. 

This work is based on the online e-learning platform Easydrum. It empowers its users to learn how to play drums online. The platform provides different drum lessons and exercises that can be played with an e-drum set connected to the computer. Every played drum or cymbal is displayed as its note on the sheet, which is moving over the screen during practicing. Thus, the user receives feedback on his performance. The disadvantage of the platform is that one has to use an e-drum set in order to receive feedback. A much more effective way to teach drums would be using an analog drum set. Playing with an e-drum set creates a different feeling and is not recommended by most musicians. Therefore, the aim of this master's thesis is to allow the use of an acoustic drum set with Easydrum. In order to achieve this, an algorithm that is able to recognize and analyze the sounds of drums and cymbals has been developed. The algorithm has to trigger an event to the platform when a drum or cymbal is played. This event must contain the point in time and the type of the performed stroke. With the help of this information the existing Easydrum application can create the feedback for the user.

To fully exploit the potential of Easydrum, the developed algorithm needs to fulfill several properties. The first and most important property is that the future software runs in real-time on the web with the help of JavaScript and the Web Audio API. It must detect and classify any stroke on a drum or cymbal and it has to be able to deal with multiple drum set components played at the same time. Furthermore, background music or noises can occur, which have to be filtered out. This master's thesis is focused on the real-time detection of onsets and the classification of separately stroked drums and cymbals. It further introduces an approach to the classification of simultaneously played strokes. Finally, a sample application running with the Web Audio API in the browser is presented.

%alThere is developed a drum configurator and a drum sound detector. The drum sound detector consists of an onset detector, an feature extractor and a classifier. The configurator is a training system, which is used to extract and save the features of every drum of a drum set. The user has to play every drum ten times to train this system. Afterward, the resulting training data can be used by the drum sound detector to classify played drums in real-time. The components are implemented in MATLAB.

There has already been a lot of research on similar subjects in the past. Automatic detection and classification of drum sounds have been studied in the context of music information retrieval for numerous purposes, including metrical analysis, database labeling and searches, automatic transcription, and interactive musical systems. An early work was introduced in 1994 by a paper of Goto and Muraoka \autocite[]{Goto:1994}. Their system deals with drum transcription used as a support in an audio-based real-time beat tracking system. M. Goto continued this work and developed an audio-based real-time beat tracking system for music with or without drum-sounds \autocite[]{Goto:2001}. This research is an important basic for every following work in the field of beat tracking and drum transcription. A work similar to the approach of this thesis was written by students of the Aalborg University in 2007. It deals with the automated recognition of drum types \autocite[]{Christophersen:2007}. Audio files with drum sounds are analyzed and transcribed to a readable format. The resulting algorithm can distinguish between a kick drum, a snare drum and a hi-hat. It is divided into onset detection, feature extraction and classification. The significant distinction to this thesis is that their system does not support real-time and cannot recognize cymbals. Another difference is that their algorithm does not require a training system. The configuration of a drum kit by a training system facilitate the recognition of played strokes. For the real-time part of the developed algorithm a paper published in 2010, which deals with real-time automatic detection and labeling of percussive sounds for interactive systems \autocite{Simsekli:2011}, has been considered. This paper introduces a model-based algorithm for the detection of percussive events. The model is trained offline with different percussive sounds by creating spectral templates for each sound. To detect and classify sounds from an audio stream input, a Hidden Markov Model is used. The classification is able to run online. An interesting approach to onset detection, with regard to real-time, is the doctor's thesis from W. Andrew Schloss from 1985 \autocite[]{Schloss:1985}. Schloss describes an easy algorithm on the automatic transcription of percussive music. Whereas most state of the art onset detection algorithms analyze the frequency spectrum of a recording, he only considers the amplitudes in the given acoustic waveform. With this approach, the algorithm reaches a low run time. Based on this research, this thesis presents different approaches to onset detection and classification. 

As a first step, an onset detection algorithm is developed based on the method introduced by \autocite{Schloss:1985}. This algorithm is tested with 18 different short recordings containing a total number of 226 onsets. The onsets include single strokes of each tested drum and cymbal as well as simultaneously played strokes. Out of all 226 onsets, 225 onsets were detected correctly and only on false positive onset was detected. 

After the onset detection, the thesis presents two different approaches for classification of the components of a standard drum kit. A training method is developed that ensures the usability of the aimed software by reducing the number of training instances to one stroke per stroke type. Both methods are tested with ten class labels including 29 different stroke types. For each stroke type ten test instances are recorded. Thus, the test set contains a total number of 290 instances. The second method is also tested with simultaneous strokes. Therefore, an additional test set of 120 instances is created. It contains combinations of two different drums, two different cymbals or a drum and a cymbal. The first method for classification uses a J48 decision tree. The tree is built by applying a feature vector of each stroke type that contains different values extracted from the frequency spectrum of the strokes. The method is tested with different feature sets. The best results are gained with a small feature set of three different features. A hit-rate of 91.72 \% is reached with this approach. The second approach is a template-based method. It also considers the frequency spectra of the different stroke types. There are constructed templates for the minimum and maximum amplitudes in the spectra of each stroke. Based on these templates, the spectral shape of unseen data instances is compared with the templates of each trained stroke type and classified as the most similar one. With this method a hit-rate of 97.2 \% is reached. If there are only considered drums (excluding cymbals), even a hit-rate of 100 \% is reached. The method can also distinguish between different stroke positions on the same drum. 70.3 \% of the tested instances are classified with the correct stroke type. For multiple strokes played at once a hit-rate of 81.67 \% is reached.

Finally, this thesis introduces a sample web application that uses JavaScript and the Web Audio API to receive an audio stream from a connected microphone. It animates the incoming audio wave on an HTML canvas element. This basic application can be extended by the developed onset detector and classification algorithm. Thus it builds a basis for the further implementation of the extension for the online platform Easydrum.

In the following sections of this thesis the development of the previously mentioned algorithms and application is described in detail. First, chapter \ref{section:basicConcepts} gives a short introduction to basic concepts needed for the development of the different algorithms. At this point, the platform Easydrum is introduced and a basic concepts of the components and notation of drum sets are given. This chapter also explains the basics of audio processing, including the digitization of sound and the transformation to its frequency spectrum. Finally, the basic concepts of onset detection and classification as well as the used development and testing tools MatLab\textsuperscript{\textregistered} and Weka, are introduced. In chapter \ref{section:relatedWork} different existing papers related to onset detection and classification of drum sound are presented. The chapter focuses on the onset detection algorithm in \autocite{Schloss:1985}, the classification methods of \autocite{Christophersen:2007}, \autocite{Bello:2005}, and the real-time approach in \autocite{Simsekli:2011}. The developed methods and the appropriate test results are described in detail in chapter \ref{section:methods}. First, in section \ref{section:hardware}, the used test drum set and hardware is specified. After that, in section \ref{section:onsetdetectionmethod}, the recordings for the onset detection are described and analyzed. Additionally, the developed onset detection algorithm and its test results are discussed. In section \ref{section:classificationSpectrumAnalysis} the frequency spectra of the different used drums and cymbals are analyzed. In the sections \ref{section:training} and \ref{section:testset} the creation of training and test set is described. The methods developed for classification are focused in sections \ref{section:method1} to \ref{section:methodCombined}. The received results are summarized and analyzed. After that, the sample JavaScript application is explained in section \ref{section:methodJavascript}. Finally, in chapter \ref{section:conclusion}, the results of all tested methods are summarized and discussed. The chapter also gives an outlook to further steps required to develop the final extension for Easydrum.